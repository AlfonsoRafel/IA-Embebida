# IA Embebida

Descripción de forma de uso e ubicación de archivos dentro del repositorio.


# Table of Contents: 
<!-- Table of contents generated generated by http://tableofcontent.eu -->
 - [Detección de eventos](#deteccion)
 - [Clasificación](#clasificacion)
 - [Actividad Alimentaria](#act-alim)


## 1. Detección de eventos
El archivo [`detection.py`](detection.py) contiene tres funciones principales:
- train recibe el path a la carpeta con los audios y el archivo con las etiquetas y devuelve un .json ([`deteccion.json`](./models/detection.json)) con los parémtros del modelo.

- predict recibe el path a la señal de audio y almacena las secciones de audios o eventos en la carpeta ([`event_detection`](./predict/event_detection))

- run recibe una señal de audio y su frecuencia de muestreo y devuelve la lista de eventos y la envolvente de la señal.

Tanto train como predict se podrán usar desde el bash para lo cual previamente se deberá colocar una u otra en el main:
```
pipenv run python deteccion.py 'datadir' 
```
- `datadir` path correspondiente según la función utilizada.
 
El archivo [`detection.ipynb`](detection.ipynb) es un jupyter notebook que contiene las pruebas realizadas para las funciones implementadas.

### 2. Clasificación
El archivo [`classification.py`](classification.py) contiene tres funciones principales:
- train recibe el path a la carpeta con los audios y el archivo con las etiquetas, entrena varios modelos y guarda el mejor en la carpeta([`models`](./models)).

- predict recibe el path a la señales de audio y genera un .csv con las predicciones realizadas en la carpeta([`classification`](./predict/classification))

- run recibe una señal de audio, la lista de eventos detectados, la frecuencia de muestro y el vector tiempos, y devuelve una lista con las predicciones realizadas.

Tanto train como predict se podrán usar desde el bash para lo cual previamente se deberá colocar una u otra en el main:
```
pipenv run python classification.py 'datadir' 
```
- `datadir` path correspondiente según la función utilizada.
 
El archivo [`classification.ipynb`](classification.ipynb) es un jupyter notebook que contiene las pruebas realizadas para las funciones implementadas.

### 3. Actividad Alimentaria

El archivo [`actividad_alimentaria.py`](actividad_alimentaria.py) contiene tres funciones principales:

- generate_dataset recibe el path a la carpeta con el audio a procesas, detecta los eventos, los clasifica, calcula los parámetros y los asocia a las etiqueta, para finalmente guardarlos en un .csv en la carpeta([`act_alimentaria`](./predict/act_alimentaria)).

- train recibe el path con el .csv para el entranimento, entrena el modelo y lo guarda en la carpeta [`models`](./models))

- run recibe un datasets con los parámetros para diferentes instancias y devuelve el mismo dataset agregadas las clases.

Tanto train como generate_dataset se podrán usar desde el bash para lo cual previamente se deberá colocar una u otra en el main:
```
pipenv run python actividad_alimentaria.py 'datadir' 
```
- `datadir` path correspondiente según la función utilizada.
 
El archivo [`actividad_alimentaria.ipynb`](actividad_alimentaria.ipynb) es un jupyter notebook que contiene las pruebas realizadas para las funciones implementadas.

### 3. Pipeline

El archivo [`pipeline.py`](pipeline.py) contiene dos funciones principales:

- pipeline recibe el path a la carpeta con los audios utilizados para la detección de eventos, detecta los eventos, los clasifica y valida los dos primeros bloques del sistema en conjunto.

- pipeline_full recibe el path a una señal de audio y la cantidad de minutos para la ventana de analisis, realiza el procesamiento completo y guarda un .csv con los resultados del modelo.